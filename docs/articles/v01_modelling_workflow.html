<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="adm">
<title>1. Modeling workflow with adm • adm</title>
<script src="../deps/jquery-3.6.1/jquery-3.6.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="1. Modeling workflow with adm">
<meta property="og:description" content="adm">
<!-- mathjax --><script src="file:///usr/share/javascript/mathjax/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">adm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html" aria-label="Home">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/v00_hyperparameter_tuning.html">0. Hyperparameter tuning with adm</a>
    <a class="dropdown-item" href="../articles/v01_modelling_workflow.html">1. Modeling workflow with adm</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://xx.github.io/adm" aria-label="GitHub">GitHub</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>1. Modeling workflow with adm</h1>
            
      
      
      <div class="d-none name"><code>v01_modelling_workflow.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Abundance-based Distribution Models (ADM) are promising approach to
construct spatially explicit correlative models of species abundance.
The <em>adm</em> package allow users to easily construct and validate
those models, meeting researches specific needs. In this vignette, users
will learn how to support a modeling workflow with <em>adm</em>, from
data preparation to model fitting and prediction.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va">adm</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="preparaing-data">Preparaing data<a class="anchor" aria-label="anchor" href="#preparaing-data"></a>
</h2>
<p>In this tutorial, we will model abundace of <em>Cynophalla
retusa</em> (Griseb.) Cornejo &amp; Iltis (Capparaceae), a dry biome
shrub native to northeastern Argentina, Paraguay, Bolivia, and central
Brazil. As predictor variables, we will use the first 7 PC (cumulative
viarance &gt; 90%) of a PCA performed with 35 climatic and edaphic
variables. We can load all needed data with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load species abundance data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"cretusa_data"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Load raster with environmental variables</span></span>
<span><span class="va">cretusa_predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"external/cretusa_predictors.tif"</span>, package <span class="op">=</span> <span class="st">"adm"</span><span class="op">)</span></span>
<span><span class="va">cretusa_predictors</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">cretusa_predictors</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cretusa_predictors</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "PC1" "PC2" "PC3" "PC4" "PC5" "PC6" "PC7"</span></span>
<span></span>
<span><span class="co"># Species training area</span></span>
<span><span class="va">sp_train_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"external/cretusa_calib_area.gpkg"</span>, package <span class="op">=</span> <span class="st">"adm"</span><span class="op">)</span></span>
<span><span class="va">sp_train_a</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">sp_train_a</span><span class="op">)</span></span></code></pre></div>
<p>Let’s explore these data</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Species data</span></span>
<span><span class="co"># ?cretusa_data</span></span>
<span><span class="va">cretusa_data</span> <span class="co"># species dat</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 366 × 5</span></span></span>
<span><span class="co">#&gt;    species           ind_ha     x     y .part</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Cynophalla retusa     10 -<span style="color: #BB0000;">64.5</span> -<span style="color: #BB0000;">22.7</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Cynophalla retusa     10 -<span style="color: #BB0000;">64.1</span> -<span style="color: #BB0000;">22.7</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Cynophalla retusa     20 -<span style="color: #BB0000;">64.7</span> -<span style="color: #BB0000;">23.1</span>     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Cynophalla retusa      0 -<span style="color: #BB0000;">62.6</span> -<span style="color: #BB0000;">23.2</span>     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Cynophalla retusa      0 -<span style="color: #BB0000;">61.7</span> -<span style="color: #BB0000;">24.5</span>     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Cynophalla retusa      0 -<span style="color: #BB0000;">61.6</span> -<span style="color: #BB0000;">25.0</span>     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Cynophalla retusa      0 -<span style="color: #BB0000;">61.2</span> -<span style="color: #BB0000;">24.5</span>     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Cynophalla retusa      0 -<span style="color: #BB0000;">64.9</span> -<span style="color: #BB0000;">23.8</span>     2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Cynophalla retusa      0 -<span style="color: #BB0000;">65.3</span> -<span style="color: #BB0000;">24.4</span>     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Cynophalla retusa      0 -<span style="color: #BB0000;">64.7</span> -<span style="color: #BB0000;">24.8</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 356 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Environmental predictors</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cretusa_predictors</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "PC1" "PC2" "PC3" "PC4" "PC5" "PC6" "PC7"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cretusa_predictors</span><span class="op">)</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/Environmental%20predictors-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Training area</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sp_train_a</span><span class="op">)</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/Training%20area-1.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cretusa_predictors</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sp_train_a</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">cretusa_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"red"</span>, pch <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>In <code>cretusa_data</code> we have 366 georeferenced points for
<em>C. retusa</em>. “ind_ha” column contains abundance measured in
individuals per hectare. “x” and “y” are decimals for longitude and
latitude, respectively. “.part” has folds of a spatial block
partitioning used for cross-validation. Now we need to extract
environmental data from predictors raster. For that, we will use
<em>adm_extract</em>, and columns with x and y coordinates will be
important.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">species_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adm_extract.html">adm_extract</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cretusa_data</span>, <span class="co"># georeferenced dataframe</span></span>
<span>  x <span class="op">=</span> <span class="st">"x"</span>, <span class="co"># spatial x coordinates</span></span>
<span>  y <span class="op">=</span> <span class="st">"y"</span>, <span class="co"># spatial y coordinates</span></span>
<span>  env_layer <span class="op">=</span> <span class="va">cretusa_predictors</span>, <span class="co"># raster with environmental variables</span></span>
<span>  variables <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># return data for all layers</span></span>
<span>  filter_na <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">species_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 366 × 12</span></span></span>
<span><span class="co">#&gt;    species    ind_ha     x     y .part    PC1    PC2    PC3   PC4    PC5     PC6</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Cynophall…     10 -<span style="color: #BB0000;">64.5</span> -<span style="color: #BB0000;">22.7</span>     1  1.50  -<span style="color: #BB0000;">1.28</span>   0.773 0.784 -<span style="color: #BB0000;">0.249</span> -<span style="color: #BB0000;">0.559</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Cynophall…     10 -<span style="color: #BB0000;">64.1</span> -<span style="color: #BB0000;">22.7</span>     1  0.750 -<span style="color: #BB0000;">1.22</span>   1.36  0.359 -<span style="color: #BB0000;">0.434</span> -<span style="color: #BB0000;">0.742</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Cynophall…     20 -<span style="color: #BB0000;">64.7</span> -<span style="color: #BB0000;">23.1</span>     2  1.21  -<span style="color: #BB0000;">1.82</span>   1.36  0.336 -<span style="color: #BB0000;">0.862</span>  0.087<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Cynophall…      0 -<span style="color: #BB0000;">62.6</span> -<span style="color: #BB0000;">23.2</span>     3 -<span style="color: #BB0000;">1.71</span>  -<span style="color: #BB0000;">2.85</span>  -<span style="color: #BB0000;">1.34</span>  0.762 -<span style="color: #BB0000;">0.745</span> -<span style="color: #BB0000;">1.02</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Cynophall…      0 -<span style="color: #BB0000;">61.7</span> -<span style="color: #BB0000;">24.5</span>     3 -<span style="color: #BB0000;">1.65</span>  -<span style="color: #BB0000;">2.17</span>  -<span style="color: #BB0000;">1.68</span>  0.175 -<span style="color: #BB0000;">0.839</span> -<span style="color: #BB0000;">0.637</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Cynophall…      0 -<span style="color: #BB0000;">61.6</span> -<span style="color: #BB0000;">25.0</span>     3 -<span style="color: #BB0000;">1.29</span>  -<span style="color: #BB0000;">2.35</span>  -<span style="color: #BB0000;">1.94</span>  0.614 -<span style="color: #BB0000;">0.944</span> -<span style="color: #BB0000;">0.805</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Cynophall…      0 -<span style="color: #BB0000;">61.2</span> -<span style="color: #BB0000;">24.5</span>     3 -<span style="color: #BB0000;">0.904</span> -<span style="color: #BB0000;">2.73</span>  -<span style="color: #BB0000;">2.30</span>  1.05  -<span style="color: #BB0000;">0.604</span> -<span style="color: #BB0000;">0.830</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Cynophall…      0 -<span style="color: #BB0000;">64.9</span> -<span style="color: #BB0000;">23.8</span>     2  0.676 -<span style="color: #BB0000;">1.57</span>   0.401 1.54  -<span style="color: #BB0000;">0.346</span> -<span style="color: #BB0000;">0.417</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Cynophall…      0 -<span style="color: #BB0000;">65.3</span> -<span style="color: #BB0000;">24.4</span>     3  0.460 -<span style="color: #BB0000;">0.795</span>  0.409 2.19  -<span style="color: #BB0000;">0.172</span> -<span style="color: #BB0000;">0.249</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Cynophall…      0 -<span style="color: #BB0000;">64.7</span> -<span style="color: #BB0000;">24.8</span>     1  1.18   0.201  0.606 2.65  -<span style="color: #BB0000;">0.356</span> -<span style="color: #BB0000;">0.775</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 356 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: PC7 &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Notice that the new dataframe have one column for each environmental
variable (layers in raster). It is possible to extract data from
specific layers using “variables” argument in <em>adm_extract</em>. To
stabilize Deep Neural Networks training, we will transform response data
using “zscore” method.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">species_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adm_transform.html">adm_transform</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"ind_ha"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"zscore"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">species_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ind_ha</span>, <span class="va">ind_ha_zscore</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 366 × 2</span></span></span>
<span><span class="co">#&gt;    ind_ha ind_ha_zscore</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     10        0.075<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     10        0.075<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     20        0.802 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      0       -<span style="color: #BB0000;">0.651</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      0       -<span style="color: #BB0000;">0.651</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      0       -<span style="color: #BB0000;">0.651</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      0       -<span style="color: #BB0000;">0.651</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      0       -<span style="color: #BB0000;">0.651</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      0       -<span style="color: #BB0000;">0.651</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      0       -<span style="color: #BB0000;">0.651</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 356 more rows</span></span></span></code></pre></div>
<p>It creates a new column called “ind_ha_zscore”, which can be used as
response variable.</p>
</div>
<div class="section level2">
<h2 id="tuning-models">Tuning models<a class="anchor" aria-label="anchor" href="#tuning-models"></a>
</h2>
<p>With all set, we are good to proceed with ADM construction. In this
tutorial, we will fine-tune, fit and validate Deep Neural Network (DNN),
Generalized Linear Models (GLM) and Random Forest (RAF) models, using
<em>tune_abund_</em> family functions.</p>
<div class="section level3">
<h3 id="raf">RAF<a class="anchor" aria-label="anchor" href="#raf"></a>
</h3>
<p>Starting with RAF, the first thing we need to do is to determine
values for hyperparameters to be tested. This could be done for all or
just part of the hyperparameters. In this example, we will set values
for all. This is done creating a grid which will guide the values
exploration, what can be easily constructed with <em>expand.grid</em>
base function:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raf_grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span>
<span>  mtry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">7</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  ntree <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">100</span>, to <span class="op">=</span> <span class="fl">1000</span>, by <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raf_grid</span><span class="op">)</span></span>
<span><span class="co">#&gt;   mtry ntree</span></span>
<span><span class="co">#&gt; 1    1   100</span></span>
<span><span class="co">#&gt; 2    2   100</span></span>
<span><span class="co">#&gt; 3    3   100</span></span>
<span><span class="co">#&gt; 4    4   100</span></span>
<span><span class="co">#&gt; 5    5   100</span></span>
<span><span class="co">#&gt; 6    6   100</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">raf_grid</span><span class="op">)</span> <span class="co"># 70 combinations of these two hyper-paramenters</span></span>
<span><span class="co">#&gt; [1] 70</span></span></code></pre></div>
<p>For RAF, “mtry” determines the number of variables randomly sampled
as candidates at each split. We setted it values to {1, 2, …, 6, 7}.
“ntree” determine the number of decision trees to grow. We set its
values to {100, 200, …, 900, 1000}. The grid combines every possible
pair of values, totalizing 70 combinations (number of rows in
“raf_grid”). Now we can use this grid with <em>tune_abund_raf</em> to
tune and validate a RAF model:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mraf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tune_abund_raf.html">tune_abund_raf</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"ind_ha"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PC1"</span>, <span class="st">"PC2"</span>, <span class="st">"PC3"</span>, <span class="st">"PC4"</span>, <span class="st">"PC5"</span>, <span class="st">"PC6"</span>, <span class="st">"PC7"</span><span class="op">)</span>,</span>
<span>  partition <span class="op">=</span> <span class="st">".part"</span>,</span>
<span>  predict_part <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># predictions for every partition will be returned</span></span>
<span>  grid <span class="op">=</span> <span class="va">raf_grid</span>,</span>
<span>  metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"corr_pear"</span>, <span class="st">"mae"</span><span class="op">)</span>, <span class="co"># metrics to select the best model</span></span>
<span>  n_cores <span class="op">=</span> <span class="fl">4</span>, <span class="co"># number of cores to be used in parallel processing</span></span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Using provided grid.</span></span>
<span><span class="co">#&gt; Searching for optimal hyperparameters...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Fitting the best model...</span></span>
<span><span class="co">#&gt; The best model was achieved with: </span></span>
<span><span class="co">#&gt;  mtry = 3 and ntree = 100</span></span></code></pre></div>
<p>The function returns a list with the following elements:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mraf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "model"               "predictors"          "performance"        </span></span>
<span><span class="co">#&gt; [4] "performance_part"    "predicted_part"      "optimal_combination"</span></span>
<span><span class="co">#&gt; [7] "all_combinations"</span></span></code></pre></div>
<p>“model”: a “randomForest” class object.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mraf</span><span class="op">$</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "randomForest.formula" "randomForest"</span></span>
<span><span class="va">mraf</span><span class="op">$</span><span class="va">model</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt;  randomForest(formula = formula1, data = data, mtry = mtry, ntree = ntree,      importance = FALSE) </span></span>
<span><span class="co">#&gt;                Type of random forest: regression</span></span>
<span><span class="co">#&gt;                      Number of trees: 100</span></span>
<span><span class="co">#&gt; No. of variables tried at each split: 3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           Mean of squared residuals: 154.5952</span></span>
<span><span class="co">#&gt;                     % Var explained: 18.24</span></span></code></pre></div>
<p>“predictors”: a tibble containing relevant informations about the
model fitted.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mraf</span><span class="op">$</span><span class="va">predictors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 9</span></span></span>
<span><span class="co">#&gt;   model response c1    c2    c3    c4    c5    c6    c7   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> raf   ind_ha   PC1   PC2   PC3   PC4   PC5   PC6   PC7</span></span></code></pre></div>
<p>“performance”: a tibble containing the best models’ performance.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mraf</span><span class="op">$</span><span class="va">performance</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 13</span></span></span>
<span><span class="co">#&gt;   model mae_mean mae_sd corr_spear_mean corr_spear_sd corr_pear_mean</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> raf       7.75   1.98           0.408         0.184          0.365</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 7 more variables: corr_pear_sd &lt;dbl&gt;, inter_mean &lt;dbl&gt;, inter_sd &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   slope_mean &lt;dbl&gt;, slope_sd &lt;dbl&gt;, pdisp_mean &lt;dbl&gt;, pdisp_sd &lt;dbl&gt;</span></span></span></code></pre></div>
<p>“performance_part”: a tibble with the performance of each
partition.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mraf</span><span class="op">$</span><span class="va">performance_part</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 9</span></span></span>
<span><span class="co">#&gt;   replica partition model   mae corr_spear corr_pear  inter slope pdisp</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1       1         raf    9.92      0.618     0.496 -<span style="color: #BB0000;">0.435</span> 1.23  0.404</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1       2         raf    7.29      0.334     0.331  2.42  0.502 0.659</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1       3         raf    6.04      0.272     0.268  2.07  0.574 0.467</span></span></code></pre></div>
<p>“predicted_part”: predictions for each partition.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mraf</span><span class="op">$</span><span class="va">predicted_part</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   replica partition observed predicted</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1       1               10      1.14</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1       1               10      3.23</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1       1                0      0.75</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1       1               10      7.03</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 1       1               10      7.58</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 1       1               10      6.51</span></span></code></pre></div>
<p>“optimal_combination”: the set of hyperparameters values considered
the best given the metrics and its performance.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mraf</span><span class="op">$</span><span class="va">optimal_combination</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 16</span></span>
<span><span class="co">#&gt; $ comb_id         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "comb_3"</span></span>
<span><span class="co">#&gt; $ mtry            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3</span></span>
<span><span class="co">#&gt; $ ntree           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 100</span></span>
<span><span class="co">#&gt; $ model           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "raf"</span></span>
<span><span class="co">#&gt; $ mae_mean        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 7.752958</span></span>
<span><span class="co">#&gt; $ mae_sd          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.978733</span></span>
<span><span class="co">#&gt; $ corr_spear_mean <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.4077742</span></span>
<span><span class="co">#&gt; $ corr_spear_sd   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.1843192</span></span>
<span><span class="co">#&gt; $ corr_pear_mean  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.3649869</span></span>
<span><span class="co">#&gt; $ corr_pear_sd    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.1175491</span></span>
<span><span class="co">#&gt; $ inter_mean      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.352334</span></span>
<span><span class="co">#&gt; $ inter_sd        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.557785</span></span>
<span><span class="co">#&gt; $ slope_mean      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.7677054</span></span>
<span><span class="co">#&gt; $ slope_sd        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.3987553</span></span>
<span><span class="co">#&gt; $ pdisp_mean      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.5099857</span></span>
<span><span class="co">#&gt; $ pdisp_sd        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.132572</span></span></code></pre></div>
<p>“all_combinations”: performance for every hyper-parameter
combination.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mraf</span><span class="op">$</span><span class="va">all_combinations</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 16</span></span></span>
<span><span class="co">#&gt;   comb_id  mtry ntree model mae_mean mae_sd corr_spear_mean corr_spear_sd</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> comb_1      1   100 raf       7.81   2.02           0.403         0.203</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> comb_2      2   100 raf       7.75   2.03           0.407         0.201</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> comb_3      3   100 raf       7.75   1.98           0.408         0.184</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> comb_4      4   100 raf       7.91   2.07           0.384         0.182</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> comb_5      5   100 raf       7.75   2.03           0.415         0.176</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> comb_6      6   100 raf       7.83   1.99           0.396         0.181</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: corr_pear_mean &lt;dbl&gt;, corr_pear_sd &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   inter_mean &lt;dbl&gt;, inter_sd &lt;dbl&gt;, slope_mean &lt;dbl&gt;, slope_sd &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   pdisp_mean &lt;dbl&gt;, pdisp_sd &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="glm">GLM<a class="anchor" aria-label="anchor" href="#glm"></a>
</h3>
<p>To tune a GLM we perform basically the same steps to tune a RAF,
paying attention to GLM singularities. First, we need to construct a
grid, just like before. However, GLM needs a “distribution”
hyper-parameter that specifies the probability distribution family to be
used. Choosing a distribution family needs attention and must be done
wisely, but <em>adm</em> provides help via <em>family_selector</em>
function. This function compares the response variable range to the
<em>gamlss</em> compatible families:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">suitable_families</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/family_selector.html">family_selector</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"ind_ha"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Response variable is discrete. Both continuous and discrete families will be tested.</span></span>
<span><span class="co">#&gt; Selected 61 suitable families for the data.</span></span></code></pre></div>
<p>The function returns a tibble with suitable families information. The
column “family_call” can be directly used in a grid.</p>
<p>If you are interested in exploring the attributes of the families for
GLM and GAM, you can use the <em>families_bank</em> database. For
further details about family distributions see
<code><a href="https://rdrr.io/pkg/gamlss.dist/man/gamlss.family.html" class="external-link">?gamlss.dist::gamlss.family</a></code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"external/families_bank.txt"</span>, package <span class="op">=</span> <span class="st">"adm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.delim</a></span><span class="op">(</span><span class="va">.</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, quote <span class="op">=</span> <span class="st">"\t"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">fm</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 9</span></span></span>
<span><span class="co">#&gt;    family_name             family_call range no_parameters discrete accepts_zero</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Beta                    BE          (0,1)             2        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Beta one inflated       BEOI        (0,1]             3        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Box-Cox Cole and Green  BCCG        (0, …             3        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Box-Cox Power Exponent… BCPE        (0, …             4        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Box-Cox-t               BCT         (0, …             4        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Exponential             EXP         (0, …             1        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Gamma                   GA          (0, …             2        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Generalized Beta type 1 GB1         (0,1)             4        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Generalized Beta type 2 GB2         (0, …             4        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Generalized Gamma       GG          (0, …             3        0            0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 77 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: one_restricted &lt;int&gt;, accepts_one &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   accepts_negatives &lt;int&gt;</span></span></span></code></pre></div>
<p>In this example, we selected some suitable distributions for use.
Now, we can construct the grid:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">glm_grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  distribution <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"NO"</span>, <span class="st">"NOF"</span>, <span class="st">"RG"</span>, <span class="st">"TF"</span>, <span class="st">"ZAIG"</span>, <span class="st">"LQNO"</span>, <span class="st">"DEL"</span>,</span>
<span>    <span class="st">"PIG"</span>, <span class="st">"WARING"</span>, <span class="st">"YULE"</span>, <span class="st">"ZALG"</span>, <span class="st">"ZIP"</span>, <span class="st">"BNB"</span>,</span>
<span>    <span class="st">"DBURR12"</span>, <span class="st">"ZIBNB"</span>, <span class="st">"LO"</span>, <span class="st">"PO"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  poly <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  inter_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Note that in `distribution` argument it is necessary use the acronyms of `family_call` column</span></span></code></pre></div>
<p>For GLM, “poly” refers to the polynomials used in model formula, and
“inter_order” refers to the interaction order between the variables.
Tuning the GLM with the grid:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mglm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tune_abund_glm.html">tune_abund_glm</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"ind_ha"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PC1"</span>, <span class="st">"PC2"</span>, <span class="st">"PC3"</span>, <span class="st">"PC4"</span>, <span class="st">"PC5"</span>, <span class="st">"PC6"</span>, <span class="st">"PC7"</span><span class="op">)</span>,</span>
<span>  predictors_f <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  partition <span class="op">=</span> <span class="st">".part"</span>,</span>
<span>  predict_part <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  grid <span class="op">=</span> <span class="va">glm_grid</span>,</span>
<span>  metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"corr_pear"</span>, <span class="st">"mae"</span><span class="op">)</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Using provided grid.</span></span>
<span><span class="co">#&gt; Searching for optimal hyperparameters...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Fitting the best model...</span></span>
<span><span class="co">#&gt; The best model was achieved with:</span></span>
<span><span class="co">#&gt;  distribution = PO</span></span>
<span><span class="co">#&gt;  poly = 2</span></span>
<span><span class="co">#&gt;  inter_order = 0</span></span></code></pre></div>
<p>The output is a list with basically the same elements as
<em>tune_abund_raf</em>, so we don’t need to go over it again. The only
difference here is the “model”, which is now is a “gamlss” class
object.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mglm</span><span class="op">$</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "gamlss" "gam"    "glm"    "lm"</span></span>
<span><span class="va">mglm</span><span class="op">$</span><span class="va">model</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Family:  c("PO", "Poisson") </span></span>
<span><span class="co">#&gt; Fitting method: RS() </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:  gamlss::gamlss(formula = formula1, sigma.formula = sigma_formula,  </span></span>
<span><span class="co">#&gt;     nu.formula = nu_formula, tau.formula = tau_formula,  </span></span>
<span><span class="co">#&gt;     family = family, data = data, control = control_gamlss,      trace = FALSE) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mu Coefficients:</span></span>
<span><span class="co">#&gt; (Intercept)          PC1          PC2          PC3          PC4          PC5  </span></span>
<span><span class="co">#&gt;   -0.539373     0.426482    -1.486044     0.500924     0.074328     0.447586  </span></span>
<span><span class="co">#&gt;         PC6          PC7     I(PC1^2)     I(PC2^2)     I(PC3^2)     I(PC4^2)  </span></span>
<span><span class="co">#&gt;   -1.497579     0.290151    -0.372255     0.004844     0.072316    -0.382721  </span></span>
<span><span class="co">#&gt;    I(PC5^2)     I(PC6^2)     I(PC7^2)  </span></span>
<span><span class="co">#&gt;    0.684274    -0.697127    -1.088711  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Degrees of Freedom for the fit: 15 Residual Deg. of Freedom   351 </span></span>
<span><span class="co">#&gt; Global Deviance:     4604.94 </span></span>
<span><span class="co">#&gt;             AIC:     4634.94 </span></span>
<span><span class="co">#&gt;             SBC:     4693.48</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dnn">DNN<a class="anchor" aria-label="anchor" href="#dnn"></a>
</h3>
<p>For DNN, in addition to a grid, the function <em>tune_abund_dnn</em>
also needs a list of architectures to test, or a single one. We will use
<em>generate_arch_list</em> function for this purpose, . However, here
things could get complicated. As DNN architecture aspects such the
number and size of layers, batch normalization, and dropout are
customizable in <em>adm</em>, many architectures could be generated at
once, with all possible combinations between these parameters, resulting
in very large lists. To filter this list, users can use
<em>select_arch_list</em> to reduce it, sampling the list using the
number of parameters as a net complexity measurement. This is highly
recommended. Let’s create and select some architectures:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">archs</span> <span class="op">&lt;-</span> <span class="fu">adm</span><span class="fu">::</span><span class="fu"><a href="../reference/generate_arch_list.html">generate_arch_list</a></span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="st">"dnn"</span>,</span>
<span>  number_of_features <span class="op">=</span> <span class="fl">7</span>, <span class="co"># input/predictor variables</span></span>
<span>  number_of_outputs <span class="op">=</span> <span class="fl">1</span>, <span class="co"># output/response variable</span></span>
<span>  n_layers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>, <span class="co"># possible number of layers</span></span>
<span>  n_neurons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">14</span>, <span class="fl">21</span><span class="op">)</span>, <span class="co"># possible number of neurons on each layer</span></span>
<span>  batch_norm <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># batch normalization between layers</span></span>
<span>  dropout <span class="op">=</span> <span class="fl">0</span> <span class="co"># without training dropout</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">number_before</span> <span class="op">&lt;-</span> <span class="va">archs</span><span class="op">$</span><span class="va">arch_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># 117</span></span>
<span></span>
<span><span class="va">archs</span> <span class="op">&lt;-</span> <span class="fu">adm</span><span class="fu">::</span><span class="fu"><a href="../reference/select_arch_list.html">select_arch_list</a></span><span class="op">(</span></span>
<span>  arch_list <span class="op">=</span> <span class="va">archs</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"dnn"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"percentile"</span>, <span class="co"># sample by number of parameters percentiles</span></span>
<span>  n_samples <span class="op">=</span> <span class="fl">2</span>, <span class="co"># at least two with each number of layers</span></span>
<span>  min_max <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># keep the more simple and the more complex networks</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">number_after</span> <span class="op">&lt;-</span> <span class="va">archs</span><span class="op">$</span><span class="va">arch_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># 52</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"From "</span>, <span class="va">number_before</span>, <span class="st">" to "</span>, <span class="va">number_after</span>, <span class="st">" architectures."</span><span class="op">)</span></span>
<span><span class="co">#&gt; From 117 to 52 architectures.</span></span></code></pre></div>
<p>However, for the sake of brevity in this tutorial, we will manually
reduce even more our architectures list to just a few:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">archs</span><span class="op">$</span><span class="va">arch_list</span> <span class="op">&lt;-</span> <span class="va">archs</span><span class="op">$</span><span class="va">arch_list</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">52</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">archs</span><span class="op">$</span><span class="va">arch_list</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 11</span></span></code></pre></div>
<p>Now we can construct the grid with hyper-parameters combinations.
Note that hyper-parameters values will be tested for each architecture.
Therefore user needs to be careful with grid and architecture list
sizes.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dnn_grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span>
<span>  batch_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">64</span><span class="op">)</span>,</span>
<span>  validation_patience <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,</span>
<span>  fitting_patience <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,</span>
<span>  learning_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.005</span>, <span class="fl">0.001</span>, <span class="fl">0.0005</span><span class="op">)</span>,</span>
<span>  n_epochs <span class="op">=</span> <span class="fl">200</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dnn_grid</span><span class="op">)</span></span>
<span><span class="co">#&gt;   batch_size validation_patience fitting_patience learning_rate n_epochs</span></span>
<span><span class="co">#&gt; 1         64                   5                5         5e-03      200</span></span>
<span><span class="co">#&gt; 2         64                   5                5         1e-03      200</span></span>
<span><span class="co">#&gt; 3         64                   5                5         5e-04      200</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dnn_grid</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p>Now we can use the architectures generated and the grid created
within the <em>tune_abund_dnn</em> function:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mdnn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tune_abund_dnn.html">tune_abund_dnn</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"ind_ha_zscore"</span>, <span class="co"># using the transformed response</span></span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PC1"</span>, <span class="st">"PC2"</span>, <span class="st">"PC3"</span>, <span class="st">"PC4"</span>, <span class="st">"PC5"</span>, <span class="st">"PC6"</span>, <span class="st">"PC7"</span><span class="op">)</span>,</span>
<span>  predictors_f <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  partition <span class="op">=</span> <span class="st">".part"</span>,</span>
<span>  predict_part <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  grid <span class="op">=</span> <span class="va">dnn_grid</span>,</span>
<span>  architectures <span class="op">=</span> <span class="va">archs</span>,</span>
<span>  metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"corr_pear"</span>, <span class="st">"mae"</span><span class="op">)</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Using provided architectures.</span></span>
<span><span class="co">#&gt; Using provided grid.</span></span>
<span><span class="co">#&gt; Testing 33 combinations.</span></span>
<span><span class="co">#&gt; Searching for optimal hyperparameters...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Fitting the best model...</span></span>
<span><span class="co">#&gt; The best model was achieved with: </span></span>
<span><span class="co">#&gt;  learning_rate = 0.005</span></span>
<span><span class="co">#&gt;  n_epochs = 200</span></span>
<span><span class="co">#&gt;  patience = 5 and 5</span></span>
<span><span class="co">#&gt;  batch_size = 64</span></span>
<span><span class="co">#&gt;  arch = 4 layers with 21-&gt;7-&gt;21-&gt;14 neurons</span></span></code></pre></div>
<p>Again, the output is very similar as before, because they are
standardize for all <em>tune_abund_</em> functions. Now, the “model”
element is a “luz_module_fitted” from <em>torch</em> and <em>luz</em>
packages.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mdnn</span><span class="op">$</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "luz_module_fitted"</span></span>
<span><span class="va">mdnn</span><span class="op">$</span><span class="va">model</span></span>
<span><span class="co">#&gt; A `luz_module_fitted`</span></span>
<span><span class="co">#&gt; ── Time ────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; • Total time: 5.2s</span></span>
<span><span class="co">#&gt; • Avg time per training epoch: 206ms</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Results ─────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Metrics observed in the last epoch.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">ℹ</span> Training:</span></span>
<span><span class="co">#&gt; loss: 0.4708</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Model ───────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; An `nn_module` containing 939 parameters.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Modules ─────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; • linear1: &lt;nn_linear&gt; #168 parameters</span></span>
<span><span class="co">#&gt; • linear2: &lt;nn_linear&gt; #154 parameters</span></span>
<span><span class="co">#&gt; • linear3: &lt;nn_linear&gt; #168 parameters</span></span>
<span><span class="co">#&gt; • linear4: &lt;nn_linear&gt; #308 parameters</span></span>
<span><span class="co">#&gt; • output: &lt;nn_linear&gt; #15 parameters</span></span>
<span><span class="co">#&gt; • bn1: &lt;nn_batch_norm1d&gt; #42 parameters</span></span>
<span><span class="co">#&gt; • bn2: &lt;nn_batch_norm1d&gt; #14 parameters</span></span>
<span><span class="co">#&gt; • bn3: &lt;nn_batch_norm1d&gt; #42 parameters</span></span>
<span><span class="co">#&gt; • bn4: &lt;nn_batch_norm1d&gt; #28 parameters</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summarizing-results">Summarizing results<a class="anchor" aria-label="anchor" href="#summarizing-results"></a>
</h3>
<p>In <em>adm</em> is possible to quick summarize several models
evalutions in one dataframe, using <em>adm_summarize</em> function:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/adm_summarize.html">adm_summarize</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">mdnn</span>, <span class="va">mraf</span>, <span class="va">mglm</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 14</span></span></span>
<span><span class="co">#&gt;   model_ID model mae_mean mae_sd corr_spear_mean corr_spear_sd corr_pear_mean</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        1 dnn      0.544  0.174           0.416         0.129          0.393</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>        2 raf      7.75   1.98            0.408         0.184          0.365</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>        3 glm      7.59   2.17            0.492         0.162          0.427</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 7 more variables: corr_pear_sd &lt;dbl&gt;, inter_mean &lt;dbl&gt;, inter_sd &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   slope_mean &lt;dbl&gt;, slope_sd &lt;dbl&gt;, pdisp_mean &lt;dbl&gt;, pdisp_sd &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="predicting-models">Predicting models<a class="anchor" aria-label="anchor" href="#predicting-models"></a>
</h2>
<p>Once we fitted models, we can make spatial predictions of them. The
process is straightforward with the <code>adm_predict</code> function.
It can make predictions for more than one model at once. For
illustration purposes, we will make predictions for a calibration area
delimited by a 100 km buffered minimum convex polygon around species
presence points, but this process is optional.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sp_train_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"external/cretusa_calib_area.gpkg"</span>, package <span class="op">=</span> <span class="st">"adm"</span><span class="op">)</span></span>
<span><span class="va">sp_train_a</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">sp_train_a</span><span class="op">)</span></span>
<span></span>
<span><span class="va">preds</span> <span class="op">&lt;-</span> <span class="fu">adm</span><span class="fu">::</span><span class="fu"><a href="../reference/adm_predict.html">adm_predict</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">mraf</span>, <span class="va">mglm</span><span class="op">)</span>,</span>
<span>  pred <span class="op">=</span> <span class="va">cretusa_predictors</span>,</span>
<span>  predict_area <span class="op">=</span> <span class="va">sp_train_a</span>,</span>
<span>  training_data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  transform_negative <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># negative predictions will be considered 0</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Predicting list of individual models</span></span></code></pre></div>
<p>To predict DNN, we need to pay attention to some detail. As we
trained the DNN with tranformed response, if we want it to predict in
the original scale, we need to use the “invert_transform” argument in
<em>adm_predict</em>:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pred_dnn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adm_predict.html">adm_predict</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="va">mdnn</span>,</span>
<span>  pred <span class="op">=</span> <span class="va">cretusa_predictors</span>,</span>
<span>  predict_area <span class="op">=</span> <span class="va">sp_train_a</span>,</span>
<span>  training_data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  transform_negative <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  invert_transform <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    method <span class="op">=</span> <span class="st">"zscore"</span>,</span>
<span>    a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">species_data</span><span class="op">$</span><span class="va">ind_ha</span><span class="op">)</span>,</span>
<span>    b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">species_data</span><span class="op">$</span><span class="va">ind_ha</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Predicting individual models</span></span></code></pre></div>
<p>Note: transformation terms varies among tranformation methods. To
learn more about it, visit <em>adm_transform</em> documentation. Let’s
visualize the predictions:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pred_dnn</span><span class="op">$</span><span class="va">dnn</span>, main <span class="op">=</span> <span class="st">"DNN"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">preds</span><span class="op">$</span><span class="va">raf</span>, main <span class="op">=</span> <span class="st">"RAF"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">preds</span><span class="op">$</span><span class="va">glm</span>, main <span class="op">=</span> <span class="st">"GLM"</span><span class="op">)</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="exploring-models">Exploring models<a class="anchor" aria-label="anchor" href="#exploring-models"></a>
</h2>
<p>Finally, we can explore how a variable or a pair of variables affect
the predicted values. <em>adm</em> features univariate and bivariate
Partial Dependence Plots, PDP, and BPDP, respectively. To create PDP we
use <code>p_abund_pdp</code>. PDP illustrates the marginal response of
one predictor. It can provide very relevant information about residuals
and model extrapolation:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># PDP for DNN model</span></span>
<span><span class="va">pdp_dnn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/p_abund_pdp.html">p_abund_pdp</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">mdnn</span>, <span class="co"># the output of tune_abund_ or fit_abund_</span></span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PC1"</span><span class="op">)</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  resid <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># plot residuals</span></span>
<span>  training_data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  invert_transform <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    method <span class="op">=</span> <span class="st">"zscore"</span>, <span class="co"># same as before</span></span>
<span>    a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">species_data</span><span class="op">$</span><span class="va">ind_ha</span><span class="op">)</span>,</span>
<span>    b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">species_data</span><span class="op">$</span><span class="va">ind_ha</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  response_name <span class="op">=</span> <span class="st">"ind/ha"</span>, <span class="co"># this argument is for aesthetic only, and determines the name of y axis</span></span>
<span>  projection_data <span class="op">=</span> <span class="va">cretusa_predictors</span>, <span class="co"># to visualize extrapolation</span></span>
<span>  rug <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># rug plot of the predictor</span></span>
<span>  colorl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#462777"</span>, <span class="st">"#6DCC57"</span><span class="op">)</span>, <span class="co"># projection and training values, respectively</span></span>
<span>  colorp <span class="op">=</span> <span class="st">"black"</span>, <span class="co"># residuals colors</span></span>
<span>  alpha <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  theme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># a ggplot2 theme</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># PDP for GLM model</span></span>
<span><span class="va">pdp_glm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/p_abund_pdp.html">p_abund_pdp</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">mglm</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PC1"</span><span class="op">)</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  resid <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  training_data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  response_name <span class="op">=</span> <span class="st">"ind/ha"</span>,</span>
<span>  projection_data <span class="op">=</span> <span class="va">cretusa_predictors</span>,</span>
<span>  rug <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  colorl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#462777"</span>, <span class="st">"#6DCC57"</span><span class="op">)</span>,</span>
<span>  colorp <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  theme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># PDP for RAF model</span></span>
<span><span class="va">pdp_raf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/p_abund_pdp.html">p_abund_pdp</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">mraf</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PC1"</span><span class="op">)</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  resid <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  training_data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  response_name <span class="op">=</span> <span class="st">"ind/ha"</span>,</span>
<span>  projection_data <span class="op">=</span> <span class="va">cretusa_predictors</span>,</span>
<span>  rug <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  colorl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#462777"</span>, <span class="st">"#6DCC57"</span><span class="op">)</span>,</span>
<span>  colorp <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  theme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pdp_dnn</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/all%20pdp-1.png" width="700"></p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pdp_raf</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/all%20pdp-2.png" width="700"></p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pdp_glm</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/all%20pdp-3.png" width="700"></p>
<p>BPDP are similar to PDP, but instead of one, it illustrates the
marginal response of a pair of variables. In this example we will use
the first and seventh PC. Note that for <code>p_abund_pdp</code> and
<code>p_abund_bpdp</code>, any subset of predictors can be used in the
“predictors” argument. If “predictors” argument is NULL, functions plot
all variables or variables pair combinations, respectively.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># BPDP for DNN</span></span>
<span><span class="va">bpdp_dnn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/p_abund_bpdp.html">p_abund_bpdp</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">mdnn</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PC1"</span>, <span class="st">"PC7"</span><span class="op">)</span>, <span class="co"># a pair of predictors</span></span>
<span>  resolution <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  training_data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  projection_data <span class="op">=</span> <span class="va">cretusa_predictors</span>,</span>
<span>  training_boundaries <span class="op">=</span> <span class="st">"convexh"</span>, <span class="co"># the shape in which the training boundaries are drawn. Outside of it, its extrapolations</span></span>
<span>  invert_transform <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    method <span class="op">=</span> <span class="st">"zscore"</span>, <span class="co"># same as before</span></span>
<span>    a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">species_data</span><span class="op">$</span><span class="va">ind_ha</span><span class="op">)</span>,</span>
<span>    b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">species_data</span><span class="op">$</span><span class="va">ind_ha</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  response_name <span class="op">=</span> <span class="st">"ind/ha"</span>,</span>
<span>  color_gradient <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"#000004"</span>, <span class="st">"#1B0A40"</span>, <span class="st">"#4A0C69"</span>, <span class="st">"#781B6C"</span>, <span class="st">"#A42C5F"</span>, <span class="st">"#CD4345"</span>,</span>
<span>    <span class="st">"#EC6824"</span>, <span class="st">"#FA990B"</span>, <span class="st">"#F7CF3D"</span>, <span class="st">"#FCFFA4"</span></span>
<span>  <span class="op">)</span>, <span class="co"># gradient for response variable</span></span>
<span>  color_training_boundaries <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  theme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># BPDP for GLM</span></span>
<span><span class="va">bpdp_glm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/p_abund_bpdp.html">p_abund_bpdp</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">mglm</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PC1"</span>, <span class="st">"PC7"</span><span class="op">)</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  training_data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  projection_data <span class="op">=</span> <span class="va">cretusa_predictors</span>,</span>
<span>  training_boundaries <span class="op">=</span> <span class="st">"convexh"</span>,</span>
<span>  response_name <span class="op">=</span> <span class="st">"ind/ha"</span>,</span>
<span>  color_gradient <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"#000004"</span>, <span class="st">"#1B0A40"</span>, <span class="st">"#4A0C69"</span>, <span class="st">"#781B6C"</span>, <span class="st">"#A42C5F"</span>, <span class="st">"#CD4345"</span>,</span>
<span>    <span class="st">"#EC6824"</span>, <span class="st">"#FA990B"</span>, <span class="st">"#F7CF3D"</span>, <span class="st">"#FCFFA4"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  color_training_boundaries <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  theme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># BPDP for RAF</span></span>
<span><span class="va">bpdp_raf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/p_abund_bpdp.html">p_abund_bpdp</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">mraf</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PC1"</span>, <span class="st">"PC7"</span><span class="op">)</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  training_data <span class="op">=</span> <span class="va">species_data</span>,</span>
<span>  projection_data <span class="op">=</span> <span class="va">cretusa_predictors</span>,</span>
<span>  training_boundaries <span class="op">=</span> <span class="st">"convexh"</span>,</span>
<span>  response_name <span class="op">=</span> <span class="st">"ind/ha"</span>,</span>
<span>  color_gradient <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"#000004"</span>, <span class="st">"#1B0A40"</span>, <span class="st">"#4A0C69"</span>, <span class="st">"#781B6C"</span>, <span class="st">"#A42C5F"</span>, <span class="st">"#CD4345"</span>,</span>
<span>    <span class="st">"#EC6824"</span>, <span class="st">"#FA990B"</span>, <span class="st">"#F7CF3D"</span>, <span class="st">"#FCFFA4"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  color_training_boundaries <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  theme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpdp_dnn</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/all%20bpdp-1.png" width="700"></p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpdp_raf</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/all%20bpdp-2.png" width="700"></p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bpdp_glm</span></span></code></pre></div>
<p><img src="v01_modelling_workflow_files/figure-html/all%20bpdp-3.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="conclusions">Conclusions<a class="anchor" aria-label="anchor" href="#conclusions"></a>
</h2>
<p>In this vignette, we explored <em>adm</em> tools to support complete
ADM workflows. The package features functions from model tuning,
fitting, and validation to model prediction and exploration.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by x x, x x.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
