<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Partial dependent plots for abundance-based distribution models — p_abund_pdp • adm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Partial dependent plots for abundance-based distribution models — p_abund_pdp"><meta name="description" content="Create partial dependence plots to explore the marginal effect of
predictors on modeled abundance"><meta property="og:description" content="Create partial dependence plots to explore the marginal effect of
predictors on modeled abundance"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">adm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Partial dependent plots for abundance-based distribution models</h1>

      <div class="d-none name"><code>p_abund_pdp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create partial dependence plots to explore the marginal effect of
predictors on modeled abundance</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">p_abund_pdp</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  predictors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  resid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  training_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  invert_transform <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  response_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  projection_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rug <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  colorl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#462777"</span>, <span class="st">"#6DCC57"</span><span class="op">)</span>,</span>
<span>  colorp <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  theme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>A model object found in the first element of the list returned
by any function from the fit_abund_ or tune_abund_ function families</p></dd>


<dt id="arg-predictors">predictors<a class="anchor" aria-label="anchor" href="#arg-predictors"></a></dt>
<dd><p>character. Vector of predictor name(s) to calculate partial dependence plots.
If NULL all predictors will be used. Default NULL</p></dd>


<dt id="arg-resolution">resolution<a class="anchor" aria-label="anchor" href="#arg-resolution"></a></dt>
<dd><p>numeric. Number of equally spaced points at which to predict abundance
values for continuous predictors. Default 50</p></dd>


<dt id="arg-resid">resid<a class="anchor" aria-label="anchor" href="#arg-resid"></a></dt>
<dd><p>logical. Calculate residuals based on training data. Default FALSE</p></dd>


<dt id="arg-training-data">training_data<a class="anchor" aria-label="anchor" href="#arg-training-data"></a></dt>
<dd><p>data.frame or tibble. Database with response and predictor values used
to fit a model. Default NULL</p></dd>


<dt id="arg-invert-transform">invert_transform<a class="anchor" aria-label="anchor" href="#arg-invert-transform"></a></dt>
<dd><p>logical. If TRUE, inverse transformation of response variable will be applied.</p></dd>


<dt id="arg-response-name">response_name<a class="anchor" aria-label="anchor" href="#arg-response-name"></a></dt>
<dd><p>character. Name of the response variable. Default NULL</p></dd>


<dt id="arg-projection-data">projection_data<a class="anchor" aria-label="anchor" href="#arg-projection-data"></a></dt>
<dd><p>SpatRaster. Raster layer with environmental variables used for model
projection. When this argument is used, function will calculate partial dependence curves
distinguishing conditions used in training and projection conditions
(i.e., projection data present in projection area but not training). Default NULL</p></dd>


<dt id="arg-rug">rug<a class="anchor" aria-label="anchor" href="#arg-rug"></a></dt>
<dd><p>logical. Add rug plot to partial dependence plot. Default FALSE</p></dd>


<dt id="arg-colorl">colorl<a class="anchor" aria-label="anchor" href="#arg-colorl"></a></dt>
<dd><p>character. Vector with colors to plot partial dependence curves. Default c("#462777", "#6DCC57")</p></dd>


<dt id="arg-colorp">colorp<a class="anchor" aria-label="anchor" href="#arg-colorp"></a></dt>
<dd><p>character. Color to plot residuals. Default "black"</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>numeric. Transparency of residuals. Default 0.2</p></dd>


<dt id="arg-theme">theme<a class="anchor" aria-label="anchor" href="#arg-theme"></a></dt>
<dd><p>ggplot2 theme. Default ggplot2::theme_classic()</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggplot object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function creates partial dependent plots to explore the marginal effect of
predictors on modeled abundance. If projection_data is used, function will extract the minimum and
maximum values found in a region or time period to which a model will be projected.
If the range of projection data is greater than of the training data it will be
plotted with a different color. Partial dependence plot could be used to interpret a
model or to explore how a model may extrapolate outside the environmental conditions
used to train the model.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="data_abund_pdp.html">data_abund_pdp</a></code>, <code><a href="data_abund_bpdp.html">data_abund_bpdp</a></code>, <code><a href="p_abund_bpdp.html">p_abund_bpdp</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load data</span></span></span>
<span class="r-in"><span><span class="va">envar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"external/envar.tif"</span>, package <span class="op">=</span> <span class="st">"adm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sppabund"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">some_sp</span> <span class="op">&lt;-</span> <span class="va">sppabund</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Species one"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fit some models</span></span></span>
<span class="r-in"><span><span class="va">mglm</span> <span class="op">&lt;-</span> <span class="fu"><a href="fit_abund_glm.html">fit_abund_glm</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"ind_ha"</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bio12"</span>, <span class="st">"elevation"</span>, <span class="st">"sand"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  predictors_f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"eco"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  partition <span class="op">=</span> <span class="st">".part"</span>,</span></span>
<span class="r-in"><span>  distribution <span class="op">=</span> <span class="st">"ZAIG"</span>,</span></span>
<span class="r-in"><span>  poly <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  inter_order <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  predict_part <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Partial Dependence Plots:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># In different resolutions</span></span></span>
<span class="r-in"><span><span class="fu">p_abund_pdp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">mglm</span>,</span></span>
<span class="r-in"><span>  resolution <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  training_data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  response_name <span class="op">=</span> <span class="st">"Abundance"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">p_abund_pdp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">mglm</span>,</span></span>
<span class="r-in"><span>  resolution <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  training_data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  response_name <span class="op">=</span> <span class="st">"Abundance"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Especific variables and different resulotions</span></span></span>
<span class="r-in"><span><span class="fu">p_abund_pdp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">mglm</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bio12"</span>, <span class="st">"sand"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  training_data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  response_name <span class="op">=</span> <span class="st">"Abundance"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With residuals and rug plot</span></span></span>
<span class="r-in"><span><span class="fu">p_abund_pdp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">mglm</span>,</span></span>
<span class="r-in"><span>  training_data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  response_name <span class="op">=</span> <span class="st">"Abundance"</span>,</span></span>
<span class="r-in"><span>  resid <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">p_abund_pdp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">mglm</span>,</span></span>
<span class="r-in"><span>  training_data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  response_name <span class="op">=</span> <span class="st">"Abundance"</span>,</span></span>
<span class="r-in"><span>  rug <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">p_abund_pdp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">mglm</span>,</span></span>
<span class="r-in"><span>  training_data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  response_name <span class="op">=</span> <span class="st">"Abundance"</span>,</span></span>
<span class="r-in"><span>  resid <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  rug <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Partial depence plot for training and projection condition found in a projection area</span></span></span>
<span class="r-in"><span><span class="fu">p_abund_pdp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">mglm</span>,</span></span>
<span class="r-in"><span>  training_data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  projection_data <span class="op">=</span> <span class="va">envar</span>,</span></span>
<span class="r-in"><span>  response_name <span class="op">=</span> <span class="st">"Abundance"</span>,</span></span>
<span class="r-in"><span>  rug <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Custumize colors and theme</span></span></span>
<span class="r-in"><span><span class="fu">p_abund_pdp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">mglm</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  resolution <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  resid <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  training_data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  projection_data <span class="op">=</span> <span class="va">envar</span>,</span></span>
<span class="r-in"><span>  colorl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  colorp <span class="op">=</span> <span class="st">"darkgray"</span>,</span></span>
<span class="r-in"><span>  alpha <span class="op">=</span> <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>  theme <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_dark</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by x x, x x.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

