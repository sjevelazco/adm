<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate data to construct partial dependence plots — data_abund_pdp • adm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate data to construct partial dependence plots — data_abund_pdp"><meta name="description" content="Calculate data to construct partial dependence plots"><meta property="og:description" content="Calculate data to construct partial dependence plots"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">adm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html" aria-label="Home"><span class="fa fa-home"></span> Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/v00_hyperparameter_tuning.html">0. Hyperparameter tuning with adm</a></li>
    <li><a class="dropdown-item" href="../articles/v01_modelling_workflow.html">1. Modeling workflow with adm</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="https://sjevelazco.github.io/adm" aria-label="GitHub">GitHub</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sjevelazco/adm/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate data to construct partial dependence plots</h1>
      <small class="dont-index">Source: <a href="https://github.com/sjevelazco/adm/blob/HEAD/R/data_abund_pdp.R" class="external-link"><code>R/data_abund_pdp.R</code></a></small>
      <div class="d-none name"><code>data_abund_pdp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate data to construct partial dependence plots</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">data_abund_pdp</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">predictors</span>,</span>
<span>  resolution <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  resid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  training_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  invert_transform <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  response_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  projection_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sample_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11</span>, <span class="fl">11</span><span class="op">)</span>,</span>
<span>  training_raster <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_coord <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_coord <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>object returned by any fit_abund or tune_abund family functions</p></dd>


<dt id="arg-predictors">predictors<a class="anchor" aria-label="anchor" href="#arg-predictors"></a></dt>
<dd><p>character. Vector with two predictor name(s) to plot. If NULL all predictors will be plotted. Default NULL</p></dd>


<dt id="arg-resolution">resolution<a class="anchor" aria-label="anchor" href="#arg-resolution"></a></dt>
<dd><p>numeric. Number of equally spaced points at which to predict continuous predictors. Default 50</p></dd>


<dt id="arg-resid">resid<a class="anchor" aria-label="anchor" href="#arg-resid"></a></dt>
<dd><p>logical. Calculate residuals based on training data. Default FALSE</p></dd>


<dt id="arg-training-data">training_data<a class="anchor" aria-label="anchor" href="#arg-training-data"></a></dt>
<dd><p>data.frame. Database with response and predictor values used
to fit a model. Default NULL. Required for GLM, GAM, DNN, NET, RAF, SVM models</p></dd>


<dt id="arg-invert-transform">invert_transform<a class="anchor" aria-label="anchor" href="#arg-invert-transform"></a></dt>
<dd><p>vector. A vector containing method and terms to invert transformation of response variable. Useful for those cases that the response variable was transformed with one of the method in <code><a href="adm_transform.html">adm_transform</a></code>. Usage:</p><ul><li><p>For "01": invert_transform = c(method = "01", a = min(x), b = max(x))</p></li>
<li><p>For "zscore": invert_transform = c(method = "zscore", a = mean(x), b = sd(x))</p></li>
<li><p>For "log" and "log1: not needed.</p></li>
<li><p>Can't invert "round" transformations.</p></li>
<li><p>Default NULL</p></li>
</ul></dd>


<dt id="arg-response-name">response_name<a class="anchor" aria-label="anchor" href="#arg-response-name"></a></dt>
<dd><p>character. Name of the response variable. Default NULL</p></dd>


<dt id="arg-projection-data">projection_data<a class="anchor" aria-label="anchor" href="#arg-projection-data"></a></dt>
<dd><p>SpatRaster. Raster layer with environmental variables used for model
projection. When this argument is used, function will calculate partial dependence curves
distinguishing conditions used in training and projection conditions
(i.e., projection data present in projection area but not training). Default NULL</p></dd>


<dt id="arg-sample-size">sample_size<a class="anchor" aria-label="anchor" href="#arg-sample-size"></a></dt>
<dd><p>vector. For CNN only. A vector containing the dimensions, in pixels, of raster samples. See cnn_make_samples beforehand. Default c(11,11)</p></dd>


<dt id="arg-training-raster">training_raster<a class="anchor" aria-label="anchor" href="#arg-training-raster"></a></dt>
<dd><p>a terra SpatRaster object. For CNN only. A raster containing the predictor variables used in tune_abund_cnn or fit_abund_cnn.</p></dd>


<dt id="arg-x-coord">x_coord<a class="anchor" aria-label="anchor" href="#arg-x-coord"></a></dt>
<dd><p>character. For CNN only. The name of the column containing longitude information for each observation.</p></dd>


<dt id="arg-y-coord">y_coord<a class="anchor" aria-label="anchor" href="#arg-y-coord"></a></dt>
<dd><p>character. For CNN only. The name of the column containing latitude information for each observation.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with two tibbles "pdpdata" and "resid".</p><ul><li><p>pdpdata: has data to construct partial dependence plots, the first column includes values of the selected environmental
variable, the second column with predicted suitability, and the third
 column with range type, with two values Training and Projecting, referring to suitability
 calculated within and outside the range of training conditions. Third column is only returned
 if "projection_data" argument is used</p></li>
<li><p>resid: has data to plot residuals. The first column includes values of the selected environmental
 variable and the second column with predicted suitability.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="data_abund_bpdp.html">data_abund_bpdp</a></code>, <code><a href="p_abund_pdp.html">p_abund_pdp</a></code>, <code><a href="p_abund_bpdp.html">p_abund_bpdp</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load  data</span></span></span>
<span class="r-in"><span><span class="va">envar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"external/envar.tif"</span>, package <span class="op">=</span> <span class="st">"adm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sppabund"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">some_sp</span> <span class="op">&lt;-</span> <span class="va">sppabund</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Species one"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fit some models</span></span></span>
<span class="r-in"><span><span class="va">mglm</span> <span class="op">&lt;-</span> <span class="fu"><a href="fit_abund_glm.html">fit_abund_glm</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"ind_ha"</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bio12"</span>, <span class="st">"elevation"</span>, <span class="st">"sand"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  predictors_f <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"eco"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  partition <span class="op">=</span> <span class="st">".part"</span>,</span></span>
<span class="r-in"><span>  distribution <span class="op">=</span> <span class="st">"ZAIG"</span>,</span></span>
<span class="r-in"><span>  poly <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  inter_order <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  predict_part <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prepare data for Partial Dependence Plots</span></span></span>
<span class="r-in"><span><span class="va">pdp_data</span> <span class="op">&lt;-</span> <span class="fu">data_abund_pdp</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model <span class="op">=</span> <span class="va">mglm</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="st">"bio12"</span>,</span></span>
<span class="r-in"><span>  resolution <span class="op">=</span> <span class="fl">25</span>,</span></span>
<span class="r-in"><span>  resid <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  training_data <span class="op">=</span> <span class="va">some_sp</span>,</span></span>
<span class="r-in"><span>  response_name <span class="op">=</span> <span class="st">"Abundance"</span>,</span></span>
<span class="r-in"><span>  projection_data <span class="op">=</span> <span class="va">envar</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pdp_data</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Admir Cesar de Oliveira Junior, Santiago José Elías Velazco.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

